/*!
 * @zevanoo/baileys-ez v1.0.0
 * Copyright (c) 2025 Zevano
 * Licensed under MIT
 */

var i=(t,s)=>{t.ev.on("messages.upsert",e=>{const m=e.messages;if(!m||m.length===0)return;s.emit("messages.upsert",e);const g=m.map(a=>s.serializeMessage(t,a));e.type==="notify"?g.forEach(async a=>{if(a){const o=a instanceof Promise?await a:a;s.emit("message.new",o),s.emit("message",{action:"new",message:o})}}):g.forEach(async a=>{a&&s.emit("message",{action:e.type,message:a instanceof Promise?await a:a})})}),t.ev.on("messages.update",e=>{s.emit("messages.update",e),e.forEach(m=>{s.emit("message.update",m),s.emit("message",{action:"update",message:m})})}),t.ev.on("messages.delete",e=>{s.emit("messages.delete",e),"keys"in e&&Array.isArray(e.keys)?e.keys.forEach(m=>{s.emit("message.remove",m),s.emit("message",{action:"remove",key:m})}):"jid"in e&&e.jid&&(s.emit("message.remove",{jid:e.jid,all:!0}),s.emit("message",{action:"remove",jid:e.jid,all:!0}))}),t.ev.on("message-receipt.update",e=>{s.emit("message-receipt.update",e),e.forEach(m=>{s.emit("message.receipt",m),s.emit("message",{action:"receipt",receipt:m})})}),t.ev.on("messages.reaction",e=>{s.emit("messages.reaction",e),e.forEach(m=>{s.emit("message.react",m),s.emit("message",{action:"react",reaction:m})})}),t.ev.on("messages.media-update",e=>{s.emit("messages.media-update",e),e.forEach(m=>{s.emit("message.media.update",m)})})};export{i as default};
